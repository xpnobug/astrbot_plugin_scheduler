name: "é€šç”¨å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨"
description: "åŠŸèƒ½å¼ºå¤§çš„é€šç”¨å®šæ—¶ä»»åŠ¡è°ƒåº¦æ’ä»¶ï¼Œæ”¯æŒCronè¡¨è¾¾å¼ã€é—´éš”æ‰§è¡Œã€æ¡ä»¶æ‰§è¡Œç­‰å¤šç§è°ƒåº¦æ–¹å¼ã€‚æä¾›å¯è§†åŒ–é…ç½®ç•Œé¢å’Œä»»åŠ¡åˆ›å»ºå‘å¯¼ã€‚"
version: "1.0.0"
author: "Couei"
repo: "https://github.com/xpnobug/astrbot_plugin_scheduler.git"
tags:
  - "ä»»åŠ¡è°ƒåº¦"
  - "å®šæ—¶ä»»åŠ¡"
  - "è‡ªåŠ¨åŒ–"
  - "Cron"
  - "è°ƒåº¦å™¨"

# æ’ä»¶ç±»å‹
type: "utility"

# æ”¯æŒçš„å¹³å°
platforms:
  - "all"

# ä¾èµ–
dependencies:
  python:
    - "aiohttp>=3.8.0"  # ç”¨äºHTTPè¯·æ±‚
  system: []

# é…ç½®schema
config_schema:
  type: "object"
  properties:
    max_concurrent_tasks:
      type: "integer"
      default: 10
      description: "æœ€å¤§å¹¶å‘ä»»åŠ¡æ•°"
    task_timeout:
      type: "integer" 
      default: 300
      description: "ä»»åŠ¡è¶…æ—¶æ—¶é—´(ç§’)"
    log_retention_days:
      type: "integer"
      default: 30
      description: "æ—¥å¿—ä¿ç•™å¤©æ•°"
    enable_task_history:
      type: "boolean"
      default: true
      description: "æ˜¯å¦å¯ç”¨ä»»åŠ¡å†å²è®°å½•"
    notification_on_failure:
      type: "boolean"
      default: true
      description: "ä»»åŠ¡å¤±è´¥æ—¶æ˜¯å¦å‘é€é€šçŸ¥"
    admin_user_id:
      type: "string"
      default: "admin"
      description: "ç®¡ç†å‘˜ç”¨æˆ·ID"

# æƒé™è¦æ±‚
permissions:
  - "file_system"      # æ–‡ä»¶æ“ä½œæƒé™
  - "network"          # ç½‘ç»œè®¿é—®æƒé™
  - "message_send"     # å‘é€æ¶ˆæ¯æƒé™
  - "schedule"         # å®šæ—¶ä»»åŠ¡æƒé™

# å‘½ä»¤åˆ—è¡¨
commands:
  - command: "/task list [group]"
    description: "åˆ—å‡ºæ‰€æœ‰å®šæ—¶ä»»åŠ¡"
    permission: "user"
  - command: "/task info <task_id>"
    description: "æŸ¥çœ‹ä»»åŠ¡è¯¦ç»†ä¿¡æ¯"
    permission: "user"
  - command: "/task create"
    description: "ğŸ†• å¯è§†åŒ–åˆ›å»ºä»»åŠ¡å‘å¯¼"
    permission: "admin"
  - command: "/task edit <task_id>"
    description: "ğŸ†• å¯è§†åŒ–ç¼–è¾‘ä»»åŠ¡"
    permission: "admin"
  - command: "/task delete <task_id>"
    description: "ğŸ†• å®‰å…¨åˆ é™¤ä»»åŠ¡"
    permission: "admin"
  - command: "/task run <task_id>"
    description: "æ‰‹åŠ¨æ‰§è¡ŒæŒ‡å®šä»»åŠ¡"
    permission: "admin"
  - command: "/task enable <task_id>"
    description: "å¯ç”¨æŒ‡å®šä»»åŠ¡"
    permission: "admin"
  - command: "/task disable <task_id>"
    description: "ç¦ç”¨æŒ‡å®šä»»åŠ¡"
    permission: "admin"
  - command: "/task status"
    description: "æŸ¥çœ‹è°ƒåº¦å™¨è¿è¡ŒçŠ¶æ€"
    permission: "user"
  - command: "/task help"
    description: "æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯"
    permission: "user"

# åŠŸèƒ½ç‰¹æ€§
features:
  - "ğŸ¯ å¯è§†åŒ–é…ç½®: å…¨æ–°çš„äº¤äº’å¼ä»»åŠ¡åˆ›å»ºå‘å¯¼ï¼Œæ— éœ€ç¼–è¾‘JSONæ–‡ä»¶"
  - "ğŸ• å¤šç§è°ƒåº¦æ–¹å¼: æ”¯æŒCronè¡¨è¾¾å¼ã€å›ºå®šé—´éš”ã€ä¸€æ¬¡æ€§ä»»åŠ¡ã€æ‰‹åŠ¨è§¦å‘"
  - "âš™ï¸ å®Œå…¨å¯é…ç½®: æ”¯æŒå¯è§†åŒ–é…ç½®å’ŒJSONé…ç½®ä¸¤ç§æ–¹å¼"
  - "ğŸ”§ ä¸°å¯ŒåŠ¨ä½œç±»å‹: å‘é€æ¶ˆæ¯ã€APIè°ƒç”¨ã€æ–‡ä»¶æ“ä½œã€ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œ"
  - "ğŸ¯ æ¡ä»¶æ‰§è¡Œ: æ”¯æŒå¤æ‚çš„æ‰§è¡Œæ¡ä»¶å’Œä»»åŠ¡ä¾èµ–å…³ç³»"
  - "ğŸ“ å˜é‡æ¨¡æ¿: åŠ¨æ€å˜é‡æ›¿æ¢ï¼Œå¦‚{{timestamp}}ã€{{date}}ç­‰"
  - "ğŸ”„ é”™è¯¯å¤„ç†: è‡ªåŠ¨é‡è¯•æœºåˆ¶ã€å¤±è´¥å¤„ç†ã€å¼‚å¸¸æ¢å¤"
  - "ğŸ“Š ç»Ÿè®¡ç›‘æ§: ä»»åŠ¡æ‰§è¡Œç»Ÿè®¡ã€æˆåŠŸç‡ç›‘æ§ã€å†å²è®°å½•"
  - "ğŸ·ï¸ ä»»åŠ¡åˆ†ç»„: æ”¯æŒä»»åŠ¡åˆ†ç»„ç®¡ç†å’Œæ‰¹é‡æ“ä½œ"
  - "â° æ—¶åŒºæ”¯æŒ: æ”¯æŒä¸åŒæ—¶åŒºçš„ä»»åŠ¡è°ƒåº¦"
  - "ğŸ›¡ï¸ å®‰å…¨ä¿æŠ¤: å‘½ä»¤æ‰§è¡Œå®‰å…¨æ£€æŸ¥ï¼Œé˜²æ­¢æ¶æ„æ“ä½œ"
  - "ğŸ”’ å®‰å…¨åˆ é™¤: éœ€è¦è¾“å…¥DELETEç¡®è®¤ï¼Œé˜²æ­¢è¯¯åˆ é™¤é‡è¦ä»»åŠ¡"

# ä½¿ç”¨åœºæ™¯
use_cases:
  - "ğŸ“… å®šæ—¶æé†’: æ¯æ—¥ç­¾åˆ°æé†’ã€ä¼šè®®é€šçŸ¥ã€ç”Ÿæ—¥æé†’ç­‰"
  - "ğŸ“° å†…å®¹æ¨é€: å®šæ—¶æ¨é€æ–°é—»ã€å¤©æ°”ã€è‚¡ç¥¨ç­‰ä¿¡æ¯"
  - "ğŸ”§ ç³»ç»Ÿç»´æŠ¤: å®šæ—¶å¤‡ä»½ã€æ—¥å¿—æ¸…ç†ã€å¥åº·æ£€æŸ¥ç­‰"
  - "ğŸ“Š æ•°æ®é‡‡é›†: å®šæ—¶è°ƒç”¨APIè·å–æ•°æ®ã€ç”ŸæˆæŠ¥å‘Šç­‰"
  - "ğŸƒ è‡ªåŠ¨åŒ–æµç¨‹: å¤æ‚çš„å¤šæ­¥éª¤è‡ªåŠ¨åŒ–ä»»åŠ¡æ‰§è¡Œ"

# é…ç½®æ–‡ä»¶è¯´æ˜
config_files:
  - path: "config/tasks.json"
    description: "ç¤ºä¾‹ä»»åŠ¡é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«å„ç§ç±»å‹çš„ä»»åŠ¡ç¤ºä¾‹"
    required: false
  - path: "data/scheduler/tasks.json"
    description: "ç”¨æˆ·å®é™…ä»»åŠ¡é…ç½®æ–‡ä»¶ï¼Œæ’ä»¶è¿è¡Œæ—¶ä¼šè‡ªåŠ¨åˆ›å»º"
    required: false

# å®‰è£…è¯´æ˜
installation:
  notes:
    - "æ’ä»¶é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºå¿…è¦çš„ç›®å½•å’Œé…ç½®æ–‡ä»¶"
    - "å¦‚éœ€è‡ªå®šä¹‰ä»»åŠ¡ï¼Œè¯·ç¼–è¾‘ data/scheduler/tasks.json æ–‡ä»¶"
    - "é…ç½®æ–‡ä»¶æ ¼å¼è¯·å‚è€ƒ config/tasks.json ä¸­çš„ç¤ºä¾‹"
    - "å»ºè®®å®šæœŸå¤‡ä»½ä»»åŠ¡é…ç½®æ–‡ä»¶"

# æ›´æ–°æ—¥å¿—
changelog:
  "1.0.0":
    - "åˆå§‹ç‰ˆæœ¬å‘å¸ƒ"
    - "æ”¯æŒCronè¡¨è¾¾å¼ã€é—´éš”æ‰§è¡Œã€ä¸€æ¬¡æ€§ä»»åŠ¡"
    - "å®ç°æ¶ˆæ¯å‘é€ã€APIè°ƒç”¨ã€æ–‡ä»¶æ“ä½œã€å‘½ä»¤æ‰§è¡Œç­‰åŠ¨ä½œç±»å‹"
    - "æä¾›å®Œæ•´çš„ä»»åŠ¡ç®¡ç†å‘½ä»¤æ¥å£"
    - "æ”¯æŒæ¡ä»¶æ‰§è¡Œå’Œå˜é‡æ¨¡æ¿"
    - "åŒ…å«é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶"

# å…¼å®¹æ€§
compatibility:
  astrbot_version: ">=2.0.0"
  python_version: ">=3.8"

# è®¸å¯è¯
license: "MIT"

# æ³¨æ„äº‹é¡¹
warnings:
  - "âš ï¸ æ‰§è¡Œç³»ç»Ÿå‘½ä»¤æœ‰å®‰å…¨é£é™©ï¼Œè¯·è°¨æ…é…ç½®commandç±»å‹çš„ä»»åŠ¡"
  - "âš ï¸ è¯·ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨ä¸å®‰å…¨çš„å‘½ä»¤æ‰§è¡Œ"
  - "âš ï¸ å»ºè®®å®šæœŸæ£€æŸ¥ä»»åŠ¡æ‰§è¡Œæ—¥å¿—ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸"
  - "âš ï¸ å¤§é‡å¹¶å‘ä»»åŠ¡å¯èƒ½å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œè¯·åˆç†è®¾ç½®ä»»åŠ¡æ•°é‡"